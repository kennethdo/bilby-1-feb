# Ralph Test App Progress Log

---

## 2026-02-01 - RTA-001: Database setup with users table
- Created src/db.js with better-sqlite3 initialization, WAL mode, and users table creation
- Users table schema: id (INTEGER PK AUTOINCREMENT), email (TEXT UNIQUE NOT NULL), password_hash (TEXT NOT NULL), created_at (TEXT DEFAULT CURRENT_TIMESTAMP)
- Database file stored at data/app.db, data/ directory created automatically
- Exports db instance and initializeDatabase function
- Files changed: src/db.js, tests/db.test.js (6 tests, all passing)
---

## 2026-02-01 - RTA-002: User registration endpoint
- Created src/routes/auth.js with POST /register endpoint
- Accepts JSON body with email and password, validates both present
- Hashes password with bcryptjs (salt rounds: 10) before storing
- Returns 201 with { id, email } on success, 400 for missing fields or duplicate email
- Tests use minimal Express app with http client (no external test deps)
- Files changed: src/routes/auth.js, tests/auth.test.js (6 tests, all passing)
---

## 2026-02-01 - RTA-003: User login endpoint with JWT
- Added POST /login route to src/routes/auth.js
- Verifies email/password against database using bcrypt.compareSync
- Returns JWT token signed with JWT_SECRET (env var or hardcoded default), expires in 24h
- JWT payload contains user id and email
- Returns 401 for wrong credentials, 400 for missing fields
- Files changed: src/routes/auth.js, tests/login.test.js (6 tests, all passing, 18 total)
---
